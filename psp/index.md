# Общие требования и соглашения

Запросы в систему отправляются через протокол HTTP.
Все запросы и ответы - в формате JSON. Параметры в теле запроса должны начинаться с заглавной буквы в формате CamelCase.

## адреса окружений

- тестовое: https://dev-payment.api.alivewater.cloud
- прод: https://payment.api.alivewater.cloud

## Подпись запросов

Для подписи всех запросов существует секретный ключ для Внешней системы. Каждый запрос подписывается и проверяется с использованием данного ключа. Значение подписи указывается в заголовке HTTP-запроса:
| Параметр | Описание | Пример |
|----------|----------|--------|
|hash|Хеш в виде HEX-строки. Хеш считается по конкатенации 4 строковых параметров без разделительных знаков: serviceId, dt, адрес запроса без хоста, тело запроса. Итоговая строка хешируется по алгоритму SHA1-HMAC секретным ключом.|Конкатенация: sid-demo1582794000/device/864626048470352/check Хеш: e87fce61f3fc5bbb3c98b0b829c9f0798000bb4d|
|serviceId|идентификатор внешней системы|sid-demo|
|dt|POSIX-время генерации подписи сообщения|1582794000|

В случае, если подпись запроса будет не корректной, ответ сервера будет: http StatusCode: 401 (Unauthorized)

## Документация апи:

https://payment.api.alivewater.cloud/documentation

## Диаграмма последовательности:

![alt text](https://www.websequencediagrams.com/files/render?link=boQNpEujaG8TCiMiOI2F1x14C5FtSHSIukza3RSrqqPN4qFCrGVjJ02pSMSLvNI8 "Title")